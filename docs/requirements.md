# パーソナルコーチAIエージェント - 要件定義

## 1. プロダクト概要（MVP）

### 1-1. プロダクトの目的

ユーザーは「何を達成したいか曖昧」だったり、
目標を立てても「忘れる」「迷ううちに何もしない」「やる気が薄れていく」ことが多い。

このアプリは、

- AIがヒアリングして目標を一緒に言語化し、
- 年／月／週レベルの方向性に落とし込み、
- 毎日「迷いのない具体タスクリスト」を自動生成し、
- 日々の状態に合わせてタスク量・内容を自動で調整する

パーソナルコーチAIエージェント（Webアプリ）。

### 1-2. 想定ユーザー（MVP）

- 自分が主な利用者（まずは1ユーザー想定）。
- 複数の目標（仕事／学習／健康／趣味など）を並行して進めたい人。
- 「考えるより、出されたタスクをこなしたい」タイプ。

## 2. 技術要件（MVPの前提）

### 2-1. フロントエンド／バックエンド共通

- **Node.js**: 22系
- **言語**: TypeScript

### 2-2. フロントエンド

**ライブラリ・フレームワーク**
- React Router v7
- Tailwind CSS
- shadcn/ui

**テスト**
- Vitest

**コード整形・Lint**
- Biome（biomejs）

### 2-3. バックエンド / データ層

**DB:**
- PostgreSQL（Prismaを経由）

**キャッシュ／セッション・状態管理など:**
- Redis

**ORM:**
- Prisma

### 2-4. 開発環境

- PostgreSQL と Redis は Docker で立ち上げる（docker-compose想定）。
- Webアプリ（フロント＋バック）は Node 22 / TS で構成（SSRかSPAかはここでは未決定でOK）。

## 3. 機能要件（MVP）

### 3-1. 目標管理（複数・並列）

**必須**

- 目標の作成／編集／アーカイブ（一時停止含む）
- 目標は複数持てる（並行進行）
- 目標ごとの属性：
  - タイトル
  - 説明（目的・Why）
  - 想定スパン（ざっくり：「長期／中期」など）
  - 優先度（高／中／低など）

**AIの役割**

- 初回ヒアリングから、目標候補を提案。
- ユーザーの回答内容をもとに、目標の文言や構造を整理して提示。

### 3-2. 年／月／週ビュー

**年ビュー**
- その年に追う目標一覧（複数）。
- 目標ごとの「年単位での状態イメージ」（一文）。

**月ビュー**
- 今月フォーカスする目標のリスト。
- 各目標に対する「今月の目標」テキスト（AIが提案／ユーザーで調整）。

**週ビュー**
- 今週取り組む目標と、その週のターゲット：
- 例）「この週にやるべき練習回数／作業ボリューム」。

※ 年〜週は「方向性を俯瞰するビュー」が主目的。
　編集は最小限（タイトル／一文程度の修正）。

### 3-3. 日単位のタスクリスト（今日やること）

**必須**

- 「今日のタスク」画面
- その日に実行すべきタスク一覧
- 各タスクの情報：
  - タイトル（具体的な行動）
  - 所要時間の目安
  - どの目標由来か

**タスクの発生元：**
- 目標／週ターゲット／AIの調整結果から、AIが日次タスクを自動生成。

**重要な要件**

タスクは「迷わず行動できる粒度」であること：
- 例：
  - NG：「英語の勉強をする」
  - OK：「〇〇テキストの10〜15ページを読む」

タスク数はAIが調整（件数自体に上限は設けないが、1日の可処分時間を超えない前提）。

ユーザーはタスクを
- 追加（自分で自由に）
- 削除
- 文言・所要時間の修正
できる。

### 3-4. 振り返り（Daily／Weekly／Monthly）

**日次振り返り（必須）**

項目例：
- 今日の気分（0〜5）
- 忙しさ（0〜5）
- 完了タスクの一覧（自動表示）とステータス確認
- 簡単なコメント（任意）

このデータをもとにAIが翌日以降のタスク量・難易度を調整。

**週次振り返り（MVPで入れる）**

項目例：
- 1週間の全体的な満足度（0〜5）
- 続いている目標／止まりがちな目標の表示
- 来週に向けて増やしたい／減らしたい負荷の指定（簡単な選択式＋任意コメント）

**月末振り返り（MVPでは "薄めの実装" として）**

- その月に各目標へどれだけタスクを実行したかのサマリ表示。
- AIが「今月のふりかえりコメント」を生成（テキスト）。
- ユーザーが「来月のざっくり方針」を入力できるフォーム。

※ 月末振り返りはモチベアップ目的。
　UIはシンプルなサマリ＋コメント生成レベルをMVPとする。

### 3-5. スケジュール調整と状態ヒアリング

**ユーザーが設定できること**

- 日次タスク提示の時間（例：毎朝7:30）
- 日次振り返りの時間（例：毎日22:00）
- 週次振り返りの曜日・時間（例：日曜21:00）

**AIの調整ロジック（要件レベル）**

入力として：
- 目標一覧（優先度・重み）
- 日次／週次の振り返りデータ
- 「使える時間」の設定

出力として：
- 各目標への週ごとの配分
- 1日のタスク数・内容の調整
- 進んでいない目標について、負荷を下げる・一時停止を提案。

### 3-6. チャット機能（AIエージェント）

**チャットで扱う主なシナリオ**

1. **初回オンボーディング**
   - 現状・悩み・興味あること・時間制約などをヒアリングし、目標候補を提示。

2. **目標の再設計／相談**
   - 「忙しくて回らない」「方向性が変わった」などの相談に対応。
   - 目標の削減・統合・再定義の提案。

3. **モチベーション低下・挫折時のサポート**
   - タスク未実行やログイン低下をトリガに、
   - 「最近しんどくない？」と問いかけ、
   - 超ミニマムな再スタート案を一緒に考える。

**チャットでやらないこと（UIに任せる）**

- 日々のタスク完了チェック
- 定型的な振り返り入力
- 設定変更

## 4. 画面（ページ）一覧（ざっくり）

1. **ダッシュボード**
   - 今日のタスクリスト
   - 簡易進捗（今週／今月）

2. **目標一覧・詳細**
   - 目標の一覧
   - 目標ごとの詳細（目的、年・月の位置づけ、進捗）

3. **年／月／週ビュー**
   - 年単位の方向性、月・週のターゲットの確認用

4. **日次振り返り画面**

5. **週次振り返り画面**

6. **月末振り返り画面（簡易版）**

7. **設定画面**
   - 時間設定（タスク提示／振り返り／週次振り返り）
   - 目標の優先度など、AI調整のヒントとなる設定

8. **チャット画面**
   - 初回インタビュー＆相談用
